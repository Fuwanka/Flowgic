<!-- calendar_modal.html -->
<div class="modal fade" id="calendarModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Календарь заказов</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div id="dashboard-calendar" style="height: 600px;"></div>
      </div>
    </div>
  </div>
</div>

<link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.css' rel='stylesheet' />
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js'></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const calendarEl = document.getElementById('dashboard-calendar');
    if (calendarEl && typeof events_json !== 'undefined') {
        const calendar = new FullCalendar.Calendar(calendarEl, {
            locale: 'ru',
            initialView: 'dayGridMonth',
            firstDay: 1,
            height: '100%',
            events: {{ events_json|safe }},
            eventClick: function(info) {
                alert(
                    `Заказ: ${info.event.title}\n` +
                    `Груз: ${info.event.extendedProps.cargo}\n` +
                    `Статус: ${info.event.extendedProps.status}`
                );
            }
        });
        calendar.render();
    }
});
</script>